!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e=e||self)["@tblbuildings/reactjs-popup"]={},e.React,e.ReactDOM)}(this,(function(e,t,o){"use strict";var n="default"in t?t.default:t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var i="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,l={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},u=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],a=function(e,t,o,n,r){var i=r.offsetX,l=r.offsetY,u=n?8:0,a=o.split(" "),c=t.height,d=t.width,f=e.top+e.height/2-c/2,s=e.left+e.width/2-d/2,p="",v="0%",m="0%";switch(a[0]){case"top":f-=c/2+e.height/2+u,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":f+=c/2+e.height/2+u,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":s-=d/2+e.width/2+u,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":s+=d/2+e.width/2+u,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(a[1]){case"top":f=e.top,v=e.height/2+"px";break;case"bottom":f=e.top-c+e.height,v=c-e.height/2+"px";break;case"left":s=e.left,m=e.width/2+"px";break;case"right":s=e.left-d+e.width,m=d-e.width/2+"px"}return{top:f="top"===a[0]?f-l:f+l,left:s="left"===a[0]?s-i:s+i,transform:p,arrowLeft:m,arrowTop:v}},c=0,d=t.forwardRef((function(e,d){var f=e.trigger,s=void 0===f?null:f,p=e.onOpen,v=void 0===p?function(){}:p,m=e.onClose,y=void 0===m?function(){}:m,h=e.defaultOpen,g=e.open,b=void 0===g?void 0:g,w=e.disabled,E=void 0!==w&&w,x=e.nested,k=void 0!==x&&x,C=e.closeOnDocumentClick,L=void 0===C||C,O=e.repositionOnResize,S=void 0===O||O,A=e.closeOnEscape,R=void 0===A||A,T=e.on,B=void 0===T?["click"]:T,I=e.contentStyle,j=void 0===I?{}:I,P=e.arrowStyle,X=void 0===P?{}:P,Y=e.overlayStyle,z=void 0===Y?{}:Y,D=e.className,M=void 0===D?"":D,F=e.position,N=void 0===F?"bottom center":F,q=e.modal,H=void 0!==q&&q,W=e.lockScroll,_=void 0!==W&&W,K=e.arrow,G=void 0===K||K,J=e.offsetX,Q=void 0===J?0:J,U=e.offsetY,V=void 0===U?0:U,Z=e.mouseEnterDelay,$=void 0===Z?100:Z,ee=e.mouseLeaveDelay,te=void 0===ee?100:ee,oe=e.keepTooltipInside,ne=void 0!==oe&&oe,re=e.disableFocusContentOnOpen,ie=void 0!==re&&re,le=e.rootId,ue=e.children,ae=t.useState(b||void 0!==h&&h),ce=ae[0],de=ae[1],fe=t.useRef(null),se=t.useRef(null),pe=t.useRef(null),ve=t.useRef(null),me=t.useRef("popup-"+ ++c),ye=!!H||!s,he=t.useRef(0);i((function(){return ce?(ve.current=document.activeElement,Re(),Oe(),Ce()):Le(),function(){clearTimeout(he.current)}}),[ce]),t.useEffect((function(){"boolean"==typeof b&&(b?ge():be())}),[b,E]);var ge=function(e){ce||E||(de(!0),setTimeout((function(){return v(e)}),0))},be=function(e){var t;ce&&!E&&(de(!1),ye&&(null===(t=ve.current)||void 0===t||t.focus()),setTimeout((function(){return y(e)}),0))},we=function(e){null==e||e.stopPropagation(),ce?be(e):ge(e)},Ee=function(e){clearTimeout(he.current),he.current=setTimeout((function(){return ge(e)}),$)},xe=function(e){null==e||e.preventDefault(),we()},ke=function(e){clearTimeout(he.current),he.current=setTimeout((function(){return be(e)}),te)},Ce=function(){ye&&_&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Le=function(){ye&&_&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Oe=function(){var e;if(!ie){var t=null==se||null===(e=se.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(t)[0];null==o||o.focus()}};t.useImperativeHandle(d,(function(){return{open:function(){ge()},close:function(){be()},toggle:function(){we()}}}));var Se,Ae,Re=function(){var e,t,o,n;if(!ye&&ce&&(null==fe?void 0:fe.current)&&(null==fe?void 0:fe.current)&&(null==se?void 0:se.current)){var r,i,l=function(e,t,o,n,r,i){var l=r.offsetX,c=r.offsetY,d={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},f=0,s=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var o=document.querySelector(e);null!==o&&(t=o.getBoundingClientRect())}return t}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,u));f<p.length;){var v={top:(d=a(e,t,p[f],n,{offsetX:l,offsetY:c})).top,left:d.left,width:t.width,height:t.height};if(!(v.top<=s.top||v.left<=s.left||v.top+v.height>=s.top+s.height||v.left+v.width>=s.left+s.width))break;f++}return d}(fe.current.getBoundingClientRect(),se.current.getBoundingClientRect(),N,G,{offsetX:Q,offsetY:V},ne),c=le?document.getElementById(le):null,d=null==c?void 0:c.getBoundingClientRect(),f=c?{yScroll:null!==(e=null==c?void 0:c.scrollTop)&&void 0!==e?e:0,xScroll:null!==(t=null==c?void 0:c.scrollLeft)&&void 0!==t?t:0}:{yScroll:window.scrollY,xScroll:window.scrollX},s=f.xScroll;se.current.style.top=l.top+f.yScroll-(null!==(o=null==d?void 0:d.y)&&void 0!==o?o:0)+"px",se.current.style.left=l.left+s-(null!==(n=null==d?void 0:d.x)&&void 0!==n?n:0)+"px",G&&pe.current&&(pe.current.style.transform=l.transform,pe.current.style.setProperty("-ms-transform",l.transform),pe.current.style.setProperty("-webkit-transform",l.transform),pe.current.style.top=(null===(r=X.top)||void 0===r?void 0:r.toString())||l.arrowTop,pe.current.style.left=(null===(i=X.left)||void 0===i?void 0:i.toString())||l.arrowLeft)}};void 0===(Ae=R)&&(Ae=!0),t.useEffect((function(){if(Ae){var e=function(e){"Escape"===e.key&&Se(e)};return document.addEventListener("keyup",e),function(){Ae&&document.removeEventListener("keyup",e)}}}),[Se=be,Ae]),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(t){if(9===t.keyCode){var o,n=null==e||null===(o=e.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void t.preventDefault();var i=r[0],l=r[r.length-1];t.shiftKey&&document.activeElement===i?(t.preventDefault(),l.focus()):document.activeElement===l&&(t.preventDefault(),i.focus())}};return document.addEventListener("keydown",t),function(){o&&document.removeEventListener("keydown",t)}}}),[e,o])}(se,ce&&ye),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(){e()};return window.addEventListener("resize",t),function(){o&&window.removeEventListener("resize",t)}}}),[e,o])}(Re,S),function(e,o,n){void 0===n&&(n=!0),t.useEffect((function(){if(n){var t=function(t){var n=Array.isArray(e)?e:[e],r=!1;n.forEach((function(e){e.current&&!e.current.contains(t.target)||(r=!0)})),t.stopPropagation(),r||o(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){n&&(document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t))}}}),[e,o,n])}(s?[se,fe]:[se],be,L&&!k);var Te=function(){return n.createElement("div",Object.assign({},(i=ye?l.popupContent.modal:l.popupContent.tooltip,u={className:"popup-content "+(""!==M?M.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:r({},i,j,!ye&&{minWidth:null!==(e=null===(t=fe.current)||void 0===t||null===(o=t.getBoundingClientRect())||void 0===o?void 0:o.width)&&void 0!==e?e:0},{pointerEvents:"auto"}),ref:se,onClick:function(e){e.stopPropagation()}},!H&&B.indexOf("hover")>=0&&(u.onMouseEnter=Ee,u.onMouseLeave=ke),u),{key:"C",role:ye?"dialog":"tooltip",id:me.current}),G&&!ye&&n.createElement("div",{ref:pe,style:l.popupArrow},n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},X)},n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ue&&"function"==typeof ue?ue(be,ce):ue);var e,t,o,i,u},Be=!(B.indexOf("hover")>=0),Ie=ye?l.overlay.modal:l.overlay.tooltip,je=[Be&&n.createElement("div",{key:"O","data-testid":"overlay","data-popup":ye?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:r({},Ie,z,{pointerEvents:L&&k||ye?"auto":"none"}),onClick:L&&k?be:void 0,tabIndex:-1},ye&&Te()),!ye&&Te()];return n.createElement(n.Fragment,null,function(){for(var e={key:"T",ref:fe,"aria-describedby":me.current},t=Array.isArray(B)?B:[B],o=0,r=t.length;o<r;o++)switch(t[o]){case"click":e.onClick=we;break;case"right-click":e.onContextMenu=xe;break;case"hover":e.onMouseEnter=Ee,e.onMouseLeave=ke;break;case"focus":e.onFocus=Ee,e.onBlur=ke}if("function"==typeof s){var i=s(ce);return!!s&&n.cloneElement(i,e)}return!!s&&n.cloneElement(s,e)}(),ce&&o.createPortal(je,function(e){var t=e&&document.getElementById(e)||document.getElementById("popup-root");return null===t&&((t=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(t)),t}(le)))}));e.Popup=d,e.default=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=reactjs-popup.umd.production.min.js.map
