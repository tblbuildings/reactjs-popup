!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e=e||self)["reactjs-popup"]={},e.React,e.ReactDOM)}(this,(function(e,t,o){"use strict";var n="default"in t?t.default:t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var i="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,a={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},u=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],l=function(e,t,o,n,r){var i=r.offsetX,a=r.offsetY,u=n?8:0,l=o.split(" "),c=t.height,f=t.width,d=e.top+e.height/2-c/2,s=e.left+e.width/2-f/2,p="",v="0%",m="0%";switch(l[0]){case"top":d-=c/2+e.height/2+u,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":d+=c/2+e.height/2+u,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":s-=f/2+e.width/2+u,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":s+=f/2+e.width/2+u,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(l[1]){case"top":d=e.top,v=e.height/2+"px";break;case"bottom":d=e.top-c+e.height,v=c-e.height/2+"px";break;case"left":s=e.left,m=e.width/2+"px";break;case"right":s=e.left-f+e.width,m=f-e.width/2+"px"}return{top:d="top"===l[0]?d-a:d+a,left:s="left"===l[0]?s-i:s+i,transform:p,arrowLeft:m,arrowTop:v}},c=0,f=t.forwardRef((function(e,f){var d=e.trigger,s=void 0===d?null:d,p=e.onOpen,v=void 0===p?function(){}:p,m=e.onClose,h=void 0===m?function(){}:m,y=e.defaultOpen,g=e.open,w=void 0===g?void 0:g,b=e.disabled,E=void 0!==b&&b,k=e.nested,x=void 0!==k&&k,O=e.closeOnDocumentClick,L=void 0===O||O,C=e.repositionOnResize,A=void 0===C||C,T=e.closeOnEscape,R=void 0===T||T,j=e.on,P=void 0===j?["click"]:j,S=e.contentStyle,X=void 0===S?{}:S,Y=e.arrowStyle,z=void 0===Y?{}:Y,B=e.overlayStyle,D=void 0===B?{}:B,I=e.className,M=void 0===I?"":I,F=e.position,N=void 0===F?"bottom center":F,q=e.modal,H=void 0!==q&&q,_=e.lockScroll,K=void 0!==_&&_,W=e.arrow,G=void 0===W||W,J=e.offsetX,Q=void 0===J?0:J,U=e.offsetY,V=void 0===U?0:U,Z=e.mouseEnterDelay,$=void 0===Z?100:Z,ee=e.mouseLeaveDelay,te=void 0===ee?100:ee,oe=e.keepTooltipInside,ne=void 0!==oe&&oe,re=e.disableFocusContentOnOpen,ie=void 0!==re&&re,ae=e.children,ue=t.useState(w||void 0!==y&&y),le=ue[0],ce=ue[1],fe=t.useRef(null),de=t.useRef(null),se=t.useRef(null),pe=t.useRef(null),ve=t.useRef("popup-"+ ++c),me=!!H||!s,he=t.useRef(0);i((function(){return le?(pe.current=document.activeElement,Te(),Le(),xe()):Oe(),function(){clearTimeout(he.current)}}),[le]),t.useEffect((function(){"boolean"==typeof w&&(w?ye():ge())}),[w,E]);var ye=function(e){le||E||(ce(!0),setTimeout((function(){return v(e)}),0))},ge=function(e){var t;le&&!E&&(ce(!1),me&&(null===(t=pe.current)||void 0===t||t.focus()),setTimeout((function(){return h(e)}),0))},we=function(e){null==e||e.stopPropagation(),le?ge(e):ye(e)},be=function(e){clearTimeout(he.current),he.current=setTimeout((function(){return ye(e)}),$)},Ee=function(e){null==e||e.preventDefault(),we()},ke=function(e){clearTimeout(he.current),he.current=setTimeout((function(){return ge(e)}),te)},xe=function(){me&&K&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Oe=function(){me&&K&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Le=function(){var e;if(!ie){var t=null==de||null===(e=de.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(t)[0];null==o||o.focus()}};t.useImperativeHandle(f,(function(){return{open:function(){ye()},close:function(){ge()},toggle:function(){we()}}}));var Ce,Ae,Te=function(){if(!me&&le&&(null==fe?void 0:fe.current)&&(null==fe?void 0:fe.current)&&(null==de?void 0:de.current)){var e,t,o=function(e,t,o,n,r,i){var a=r.offsetX,c=r.offsetY,f={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},d=0,s=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var o=document.querySelector(e);null!==o&&(t=o.getBoundingClientRect())}return t}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,u));d<p.length;){var v={top:(f=l(e,t,p[d],n,{offsetX:a,offsetY:c})).top,left:f.left,width:t.width,height:t.height};if(!(v.top<=s.top||v.left<=s.left||v.top+v.height>=s.top+s.height||v.left+v.width>=s.left+s.width))break;d++}return f}(fe.current.getBoundingClientRect(),de.current.getBoundingClientRect(),N,G,{offsetX:Q,offsetY:V},ne);de.current.style.top=o.top+window.scrollY+"px",de.current.style.left=o.left+window.scrollX+"px",G&&se.current&&(se.current.style.transform=o.transform,se.current.style.setProperty("-ms-transform",o.transform),se.current.style.setProperty("-webkit-transform",o.transform),se.current.style.top=(null===(e=z.top)||void 0===e?void 0:e.toString())||o.arrowTop,se.current.style.left=(null===(t=z.left)||void 0===t?void 0:t.toString())||o.arrowLeft)}};void 0===(Ae=R)&&(Ae=!0),t.useEffect((function(){if(Ae){var e=function(e){"Escape"===e.key&&Ce(e)};return document.addEventListener("keyup",e),function(){Ae&&document.removeEventListener("keyup",e)}}}),[Ce=ge,Ae]),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(t){if(9===t.keyCode){var o,n=null==e||null===(o=e.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void t.preventDefault();var i=r[0],a=r[r.length-1];t.shiftKey&&document.activeElement===i?(t.preventDefault(),a.focus()):document.activeElement===a&&(t.preventDefault(),i.focus())}};return document.addEventListener("keydown",t),function(){o&&document.removeEventListener("keydown",t)}}}),[e,o])}(de,le&&me),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(){e()};return window.addEventListener("resize",t),function(){o&&window.removeEventListener("resize",t)}}}),[e,o])}(Te,A),function(e,o,n){void 0===n&&(n=!0),t.useEffect((function(){if(n){var t=function(t){var n=Array.isArray(e)?e:[e],r=!1;n.forEach((function(e){e.current&&!e.current.contains(t.target)||(r=!0)})),t.stopPropagation(),r||o(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){n&&(document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t))}}}),[e,o,n])}(s?[de,fe]:[de],ge,L&&!x);var Re,je=function(){return n.createElement("div",Object.assign({},(e=me?a.popupContent.modal:a.popupContent.tooltip,t={className:"popup-content "+(""!==M?M.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:r({},e,X,{pointerEvents:"auto"}),ref:de,onClick:function(e){e.stopPropagation()}},!H&&P.indexOf("hover")>=0&&(t.onMouseEnter=be,t.onMouseLeave=ke),t),{key:"C",role:me?"dialog":"tooltip",id:ve.current}),G&&!me&&n.createElement("div",{ref:se,style:a.popupArrow},n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},z)},n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ae&&"function"==typeof ae?ae(ge,le):ae);var e,t},Pe=!(P.indexOf("hover")>=0),Se=me?a.overlay.modal:a.overlay.tooltip,Xe=[Pe&&n.createElement("div",{key:"O","data-testid":"overlay","data-popup":me?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:r({},Se,D,{pointerEvents:L&&x||me?"auto":"none"}),onClick:L&&x?ge:void 0,tabIndex:-1},me&&je()),!me&&je()];return n.createElement(n.Fragment,null,function(){for(var e={key:"T",ref:fe,"aria-describedby":ve.current},t=Array.isArray(P)?P:[P],o=0,r=t.length;o<r;o++)switch(t[o]){case"click":e.onClick=we;break;case"right-click":e.onContextMenu=Ee;break;case"hover":e.onMouseEnter=be,e.onMouseLeave=ke;break;case"focus":e.onFocus=be,e.onBlur=ke}if("function"==typeof s){var i=s(le);return!!s&&n.cloneElement(i,e)}return!!s&&n.cloneElement(s,e)}(),le&&o.createPortal(Xe,(null===(Re=document.getElementById("popup-root"))&&((Re=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Re)),Re)))}));e.Popup=f,e.default=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=reactjs-popup.umd.production.min.js.map
