"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),o=t(e),n=t(require("react-dom"));function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}var i="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,l={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},u=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],a=function(t,e,o,n,r){var i=r.offsetX,l=r.offsetY,u=n?8:0,a=o.split(" "),c=e.height,d=e.width,f=t.top+t.height/2-c/2,s=t.left+t.width/2-d/2,p="",v="0%",m="0%";switch(a[0]){case"top":f-=c/2+t.height/2+u,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":f+=c/2+t.height/2+u,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":s-=d/2+t.width/2+u,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":s+=d/2+t.width/2+u,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(a[1]){case"top":f=t.top,v=t.height/2+"px";break;case"bottom":f=t.top-c+t.height,v=c-t.height/2+"px";break;case"left":s=t.left,m=t.width/2+"px";break;case"right":s=t.left-d+t.width,m=d-t.width/2+"px"}return{top:f="top"===a[0]?f-l:f+l,left:s="left"===a[0]?s-i:s+i,transform:p,arrowLeft:m,arrowTop:v}},c=0,d=e.forwardRef((function(t,d){var f=t.trigger,s=void 0===f?null:f,p=t.onOpen,v=void 0===p?function(){}:p,m=t.onClose,h=void 0===m?function(){}:m,y=t.defaultOpen,g=t.open,w=void 0===g?void 0:g,b=t.disabled,E=void 0!==b&&b,x=t.nested,k=void 0!==x&&x,C=t.closeOnDocumentClick,L=void 0===C||C,S=t.repositionOnResize,A=void 0===S||S,O=t.closeOnEscape,T=void 0===O||O,R=t.on,B=void 0===R?["click"]:R,I=t.contentStyle,X=void 0===I?{}:I,P=t.arrowStyle,Y=void 0===P?{}:P,j=t.overlayStyle,z=void 0===j?{}:j,D=t.className,M=void 0===D?"":D,F=t.position,N=void 0===F?"bottom center":F,q=t.modal,H=void 0!==q&&q,W=t.lockScroll,_=void 0!==W&&W,K=t.arrow,G=void 0===K||K,J=t.offsetX,Q=void 0===J?0:J,U=t.offsetY,V=void 0===U?0:U,Z=t.mouseEnterDelay,$=void 0===Z?100:Z,tt=t.mouseLeaveDelay,et=void 0===tt?100:tt,ot=t.keepTooltipInside,nt=void 0!==ot&&ot,rt=t.disableFocusContentOnOpen,it=void 0!==rt&&rt,lt=t.rootId,ut=t.children,at=t.automaticallyDefineMinWidth,ct=e.useState(w||void 0!==y&&y),dt=ct[0],ft=ct[1],st=e.useRef(null),pt=e.useRef(null),vt=e.useRef(null),mt=e.useRef(null),ht=e.useRef("popup-"+ ++c),yt=!!H||!s,gt=e.useRef(0);i((function(){return dt?(mt.current=document.activeElement,Rt(),At(),Lt()):St(),function(){clearTimeout(gt.current)}}),[dt]),e.useEffect((function(){"boolean"==typeof w&&(w?wt():bt())}),[w,E]);var wt=function(t){dt||E||(ft(!0),setTimeout((function(){return v(t)}),0))},bt=function(t){var e;dt&&!E&&(ft(!1),yt&&(null===(e=mt.current)||void 0===e||e.focus()),setTimeout((function(){return h(t)}),0))},Et=function(t){null==t||t.stopPropagation(),dt?bt(t):wt(t)},xt=function(t){clearTimeout(gt.current),gt.current=setTimeout((function(){return wt(t)}),$)},kt=function(t){null==t||t.preventDefault(),Et()},Ct=function(t){clearTimeout(gt.current),gt.current=setTimeout((function(){return bt(t)}),et)},Lt=function(){yt&&_&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},St=function(){yt&&_&&(document.getElementsByTagName("body")[0].style.overflow="auto")},At=function(){var t;if(!it){var e=null==pt||null===(t=pt.current)||void 0===t?void 0:t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(e)[0];null==o||o.focus()}};e.useImperativeHandle(d,(function(){return{open:function(){wt()},close:function(){bt()},toggle:function(){Et()}}}));var Ot,Tt,Rt=function(){var t,e,o,n;if(!yt&&dt&&(null==st?void 0:st.current)&&(null==st?void 0:st.current)&&(null==pt?void 0:pt.current)){var r,i,l=function(t,e,o,n,r,i){var l=r.offsetX,c=r.offsetY,d={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},f=0,s=function(t){var e={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof t){var o=document.querySelector(t);null!==o&&(e=o.getBoundingClientRect())}return e}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,u));f<p.length;){var v={top:(d=a(t,e,p[f],n,{offsetX:l,offsetY:c})).top,left:d.left,width:e.width,height:e.height};if(!(v.top<=s.top||v.left<=s.left||v.top+v.height>=s.top+s.height||v.left+v.width>=s.left+s.width))break;f++}return d}(st.current.getBoundingClientRect(),pt.current.getBoundingClientRect(),N,G,{offsetX:Q,offsetY:V},nt),c=lt?document.getElementById(lt):null,d=null==c?void 0:c.getBoundingClientRect(),f=c?{yScroll:null!==(t=null==c?void 0:c.scrollTop)&&void 0!==t?t:0,xScroll:null!==(e=null==c?void 0:c.scrollLeft)&&void 0!==e?e:0}:{yScroll:window.scrollY,xScroll:window.scrollX},s=f.xScroll;pt.current.style.top=l.top+f.yScroll-(null!==(o=null==d?void 0:d.y)&&void 0!==o?o:0)+"px",pt.current.style.left=l.left+s-(null!==(n=null==d?void 0:d.x)&&void 0!==n?n:0)+"px",G&&vt.current&&(vt.current.style.transform=l.transform,vt.current.style.setProperty("-ms-transform",l.transform),vt.current.style.setProperty("-webkit-transform",l.transform),vt.current.style.top=(null===(r=Y.top)||void 0===r?void 0:r.toString())||l.arrowTop,vt.current.style.left=(null===(i=Y.left)||void 0===i?void 0:i.toString())||l.arrowLeft)}};void 0===(Tt=T)&&(Tt=!0),e.useEffect((function(){if(Tt){var t=function(t){"Escape"===t.key&&Ot(t)};return document.addEventListener("keyup",t),function(){Tt&&document.removeEventListener("keyup",t)}}}),[Ot=bt,Tt]),function(t,o){void 0===o&&(o=!0),e.useEffect((function(){if(o){var e=function(e){if(9===e.keyCode){var o,n=null==t||null===(o=t.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void e.preventDefault();var i=r[0],l=r[r.length-1];e.shiftKey&&document.activeElement===i?(e.preventDefault(),l.focus()):document.activeElement===l&&(e.preventDefault(),i.focus())}};return document.addEventListener("keydown",e),function(){o&&document.removeEventListener("keydown",e)}}}),[t,o])}(pt,dt&&yt),function(t,o){void 0===o&&(o=!0),e.useEffect((function(){if(o){var e=function(){t()};return window.addEventListener("resize",e),function(){o&&window.removeEventListener("resize",e)}}}),[t,o])}(Rt,A),function(t,o,n){void 0===n&&(n=!0),e.useEffect((function(){if(n){var e=function(e){var n=Array.isArray(t)?t:[t],r=!1;n.forEach((function(t){t.current&&!t.current.contains(e.target)||(r=!0)})),e.stopPropagation(),r||o(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){n&&(document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e))}}}),[t,o,n])}(s?[pt,st]:[pt],bt,L&&!k);var Bt=function(){return o.createElement("div",Object.assign({},(i=yt?l.popupContent.modal:l.popupContent.tooltip,u={className:"popup-content "+(""!==M?M.split(" ").map((function(t){return t+"-content"})).join(" "):""),style:r({},i,X,at&&{minWidth:null!==(t=null===(e=st.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width)&&void 0!==t?t:0},{pointerEvents:"auto"}),ref:pt,onClick:function(t){t.stopPropagation()}},!H&&B.indexOf("hover")>=0&&(u.onMouseEnter=xt,u.onMouseLeave=Ct),u),{key:"C",role:yt?"dialog":"tooltip",id:ht.current}),G&&!yt&&o.createElement("div",{ref:vt,style:l.popupArrow},o.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(t){return t+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},Y)},o.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ut&&"function"==typeof ut?ut(bt,dt):ut);var t,e,n,i,u},It=!(B.indexOf("hover")>=0),Xt=yt?l.overlay.modal:l.overlay.tooltip,Pt=[It&&o.createElement("div",{key:"O","data-testid":"overlay","data-popup":yt?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(t){return t+"-overlay"})).join(" "):""),style:r({},Xt,z,{pointerEvents:L&&k||yt?"auto":"none"}),onClick:L&&k?bt:void 0,tabIndex:-1},yt&&Bt()),!yt&&Bt()];return o.createElement(o.Fragment,null,function(){for(var t={key:"T",ref:st,"aria-describedby":ht.current},e=Array.isArray(B)?B:[B],n=0,r=e.length;n<r;n++)switch(e[n]){case"click":t.onClick=Et;break;case"right-click":t.onContextMenu=kt;break;case"hover":t.onMouseEnter=xt,t.onMouseLeave=Ct;break;case"focus":t.onFocus=xt,t.onBlur=Ct}if("function"==typeof s){var i=s(dt);return!!s&&o.cloneElement(i,t)}return!!s&&o.cloneElement(s,t)}(),dt&&n.createPortal(Pt,function(t){var e=t&&document.getElementById(t)||document.getElementById("popup-root");return null===e&&((e=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(e)),e}(lt)))}));exports.Popup=d,exports.default=d;
//# sourceMappingURL=reactjs-popup.cjs.production.min.js.map
