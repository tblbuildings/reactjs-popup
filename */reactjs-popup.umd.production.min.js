!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e=e||self)["reactjs-popup"]={},e.React,e.ReactDOM)}(this,(function(e,t,o){"use strict";var n="default"in t?t.default:t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var i="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,a={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},u=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],l=function(e,t,o,n,r){var i=r.offsetX,a=r.offsetY,u=n?8:0,l=o.split(" "),c=t.height,f=t.width,d=e.top+e.height/2-c/2,s=e.left+e.width/2-f/2,p="",v="0%",m="0%";switch(l[0]){case"top":d-=c/2+e.height/2+u,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":d+=c/2+e.height/2+u,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":s-=f/2+e.width/2+u,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":s+=f/2+e.width/2+u,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(l[1]){case"top":d=e.top,v=e.height/2+"px";break;case"bottom":d=e.top-c+e.height,v=c-e.height/2+"px";break;case"left":s=e.left,m=e.width/2+"px";break;case"right":s=e.left-f+e.width,m=f-e.width/2+"px"}return{top:d="top"===l[0]?d-a:d+a,left:s="left"===l[0]?s-i:s+i,transform:p,arrowLeft:m,arrowTop:v}},c=0,f=t.forwardRef((function(e,f){var d=e.trigger,s=void 0===d?null:d,p=e.onOpen,v=void 0===p?function(){}:p,m=e.onClose,h=void 0===m?function(){}:m,y=e.defaultOpen,g=e.open,w=void 0===g?void 0:g,b=e.disabled,E=void 0!==b&&b,k=e.nested,x=void 0!==k&&k,L=e.closeOnDocumentClick,O=void 0===L||L,A=e.repositionOnResize,C=void 0===A||A,T=e.closeOnEscape,R=void 0===T||T,j=e.on,P=void 0===j?["click"]:j,S=e.contentStyle,X=void 0===S?{}:S,Y=e.arrowStyle,z=void 0===Y?{}:Y,B=e.overlayStyle,D=void 0===B?{}:B,I=e.className,M=void 0===I?"":I,N=e.position,q=void 0===N?"bottom center":N,F=e.modal,H=void 0!==F&&F,_=e.lockScroll,K=void 0!==_&&_,W=e.arrow,G=void 0===W||W,J=e.offsetX,Q=void 0===J?0:J,U=e.offsetY,V=void 0===U?0:U,Z=e.mouseEnterDelay,$=void 0===Z?100:Z,ee=e.mouseLeaveDelay,te=void 0===ee?100:ee,oe=e.keepTooltipInside,ne=void 0!==oe&&oe,re=e.children,ie=t.useState(w||void 0!==y&&y),ae=ie[0],ue=ie[1],le=t.useRef(null),ce=t.useRef(null),fe=t.useRef(null),de=t.useRef(null),se=t.useRef("popup-"+ ++c),pe=!!H||!s,ve=t.useRef(0);i((function(){return ae?(de.current=document.activeElement,Ae(),xe(),Ee()):ke(),function(){clearTimeout(ve.current)}}),[ae]),t.useEffect((function(){"boolean"==typeof w&&(w?me():he())}),[w,E]);var me=function(e){ae||E||(ue(!0),setTimeout((function(){return v(e)}),0))},he=function(e){var t;ae&&!E&&(ue(!1),pe&&(null===(t=de.current)||void 0===t||t.focus()),setTimeout((function(){return h(e)}),0))},ye=function(e){null==e||e.stopPropagation(),ae?he(e):me(e)},ge=function(e){clearTimeout(ve.current),ve.current=setTimeout((function(){return me(e)}),$)},we=function(e){null==e||e.preventDefault(),ye()},be=function(e){clearTimeout(ve.current),ve.current=setTimeout((function(){return he(e)}),te)},Ee=function(){pe&&K&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},ke=function(){pe&&K&&(document.getElementsByTagName("body")[0].style.overflow="auto")},xe=function(){var e,t=null==ce||null===(e=ce.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(t)[0];null==o||o.focus()};t.useImperativeHandle(f,(function(){return{open:function(){me()},close:function(){he()},toggle:function(){ye()}}}));var Le,Oe,Ae=function(){if(!pe&&ae&&(null==le?void 0:le.current)&&(null==le?void 0:le.current)&&(null==ce?void 0:ce.current)){var e,t,o=function(e,t,o,n,r,i){var a=r.offsetX,c=r.offsetY,f={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},d=0,s=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var o=document.querySelector(e);null!==o&&(t=o.getBoundingClientRect())}return t}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,u));d<p.length;){var v={top:(f=l(e,t,p[d],n,{offsetX:a,offsetY:c})).top,left:f.left,width:t.width,height:t.height};if(!(v.top<=s.top||v.left<=s.left||v.top+v.height>=s.top+s.height||v.left+v.width>=s.left+s.width))break;d++}return f}(le.current.getBoundingClientRect(),ce.current.getBoundingClientRect(),q,G,{offsetX:Q,offsetY:V},ne);ce.current.style.top=o.top+window.scrollY+"px",ce.current.style.left=o.left+window.scrollX+"px",G&&fe.current&&(fe.current.style.transform=o.transform,fe.current.style.setProperty("-ms-transform",o.transform),fe.current.style.setProperty("-webkit-transform",o.transform),fe.current.style.top=(null===(e=z.top)||void 0===e?void 0:e.toString())||o.arrowTop,fe.current.style.left=(null===(t=z.left)||void 0===t?void 0:t.toString())||o.arrowLeft)}};void 0===(Oe=R)&&(Oe=!0),t.useEffect((function(){if(Oe){var e=function(e){"Escape"===e.key&&Le(e)};return document.addEventListener("keyup",e),function(){Oe&&document.removeEventListener("keyup",e)}}}),[Le=he,Oe]),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(t){if(9===t.keyCode){var o,n=null==e||null===(o=e.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void t.preventDefault();var i=r[0],a=r[r.length-1];t.shiftKey&&document.activeElement===i?(t.preventDefault(),a.focus()):document.activeElement===a&&(t.preventDefault(),i.focus())}};return document.addEventListener("keydown",t),function(){o&&document.removeEventListener("keydown",t)}}}),[e,o])}(ce,ae&&pe),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(){e()};return window.addEventListener("resize",t),function(){o&&window.removeEventListener("resize",t)}}}),[e,o])}(Ae,C),function(e,o,n){void 0===n&&(n=!0),t.useEffect((function(){if(n){var t=function(t){var n=Array.isArray(e)?e:[e],r=!1;n.forEach((function(e){e.current&&!e.current.contains(t.target)||(r=!0)})),t.stopPropagation(),r||o(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){n&&(document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t))}}}),[e,o,n])}(s?[ce,le]:[ce],he,O&&!x);var Ce,Te=function(){return n.createElement("div",Object.assign({},(e=pe?a.popupContent.modal:a.popupContent.tooltip,t={className:"popup-content "+(""!==M?M.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:r({},e,X,{pointerEvents:"auto"}),ref:ce,onClick:function(e){e.stopPropagation()}},!H&&P.indexOf("hover")>=0&&(t.onMouseEnter=ge,t.onMouseLeave=be),t),{key:"C",role:pe?"dialog":"tooltip",id:se.current}),G&&!pe&&n.createElement("div",{ref:fe,style:a.popupArrow},n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},z)},n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),re&&"function"==typeof re?re(he,ae):re);var e,t},Re=!(P.indexOf("hover")>=0),je=pe?a.overlay.modal:a.overlay.tooltip,Pe=[Re&&n.createElement("div",{key:"O","data-testid":"overlay","data-popup":pe?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:r({},je,D,{pointerEvents:O&&x||pe?"auto":"none"}),onClick:O&&x?he:void 0,tabIndex:-1},pe&&Te()),!pe&&Te()];return n.createElement(n.Fragment,null,function(){for(var e={key:"T",ref:le,"aria-describedby":se.current},t=Array.isArray(P)?P:[P],o=0,r=t.length;o<r;o++)switch(t[o]){case"click":e.onClick=ye;break;case"right-click":e.onContextMenu=we;break;case"hover":e.onMouseEnter=ge,e.onMouseLeave=be;break;case"focus":e.onFocus=ge,e.onBlur=be}if("function"==typeof s){var i=s(ae);return!!s&&n.cloneElement(i,e)}return!!s&&n.cloneElement(s,e)}(),ae&&o.createPortal(Pe,(null===(Ce=document.getElementById("popup-root"))&&((Ce=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Ce)),Ce)))}));e.Popup=f,e.default=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=reactjs-popup.umd.production.min.js.map
